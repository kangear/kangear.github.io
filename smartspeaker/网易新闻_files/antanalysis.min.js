!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.NTESAntAnalysis=t()}(this,function(){function t(){var r=8,i=0;function o(e,t,n,s,r,i){return l((a=l(l(t,e),l(s,i)))<<(o=r)|a>>>32-o,n);var a,o}function f(e,t,n,s,r,i,a){return o(t&n|~t&s,e,t,r,i,a)}function h(e,t,n,s,r,i,a){return o(t&s|n&~s,e,t,r,i,a)}function p(e,t,n,s,r,i,a){return o(t^n^s,e,t,r,i,a)}function m(e,t,n,s,r,i,a){return o(n^(t|~s),e,t,r,i,a)}function l(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}var e,t=new Date,n=document.body.clientWidth+":"+document.body.clientHeight,s=function(e){var t,n="";for(t=0;t<e.length;t++){var s=e.charCodeAt(t),r="";if(255<s){for(;1<=s;)r="0123456789".charAt(s%10)+r,s/=10;""==r&&(r="0"),r="&"+(r="#"+r),n+=r+=";"}else n+=e.charAt(t)}return n}(t.getTime()+document.location+screen.width+screen.height+navigator.userAgent+Math.random()+n);return function(e){for(var t=i?"0123456789ABCDEF":"0123456789abcdef",n="",s=0;s<4*e.length;s++)n+=t.charAt(e[s>>2]>>s%4*8+4&15)+t.charAt(e[s>>2]>>s%4*8&15);return n}(function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,s=-271733879,r=-1732584194,i=271733878,a=0;a<e.length;a+=16){var o=n,c=s,u=r,d=i;n=f(n,s,r,i,e[a+0],7,-680876936),i=f(i,n,s,r,e[a+1],12,-389564586),r=f(r,i,n,s,e[a+2],17,606105819),s=f(s,r,i,n,e[a+3],22,-1044525330),n=f(n,s,r,i,e[a+4],7,-176418897),i=f(i,n,s,r,e[a+5],12,1200080426),r=f(r,i,n,s,e[a+6],17,-1473231341),s=f(s,r,i,n,e[a+7],22,-45705983),n=f(n,s,r,i,e[a+8],7,1770035416),i=f(i,n,s,r,e[a+9],12,-1958414417),r=f(r,i,n,s,e[a+10],17,-42063),s=f(s,r,i,n,e[a+11],22,-1990404162),n=f(n,s,r,i,e[a+12],7,1804603682),i=f(i,n,s,r,e[a+13],12,-40341101),r=f(r,i,n,s,e[a+14],17,-1502002290),s=f(s,r,i,n,e[a+15],22,1236535329),n=h(n,s,r,i,e[a+1],5,-165796510),i=h(i,n,s,r,e[a+6],9,-1069501632),r=h(r,i,n,s,e[a+11],14,643717713),s=h(s,r,i,n,e[a+0],20,-373897302),n=h(n,s,r,i,e[a+5],5,-701558691),i=h(i,n,s,r,e[a+10],9,38016083),r=h(r,i,n,s,e[a+15],14,-660478335),s=h(s,r,i,n,e[a+4],20,-405537848),n=h(n,s,r,i,e[a+9],5,568446438),i=h(i,n,s,r,e[a+14],9,-1019803690),r=h(r,i,n,s,e[a+3],14,-187363961),s=h(s,r,i,n,e[a+8],20,1163531501),n=h(n,s,r,i,e[a+13],5,-1444681467),i=h(i,n,s,r,e[a+2],9,-51403784),r=h(r,i,n,s,e[a+7],14,1735328473),s=h(s,r,i,n,e[a+12],20,-1926607734),n=p(n,s,r,i,e[a+5],4,-378558),i=p(i,n,s,r,e[a+8],11,-2022574463),r=p(r,i,n,s,e[a+11],16,1839030562),s=p(s,r,i,n,e[a+14],23,-35309556),n=p(n,s,r,i,e[a+1],4,-1530992060),i=p(i,n,s,r,e[a+4],11,1272893353),r=p(r,i,n,s,e[a+7],16,-155497632),s=p(s,r,i,n,e[a+10],23,-1094730640),n=p(n,s,r,i,e[a+13],4,681279174),i=p(i,n,s,r,e[a+0],11,-358537222),r=p(r,i,n,s,e[a+3],16,-722521979),s=p(s,r,i,n,e[a+6],23,76029189),n=p(n,s,r,i,e[a+9],4,-640364487),i=p(i,n,s,r,e[a+12],11,-421815835),r=p(r,i,n,s,e[a+15],16,530742520),s=p(s,r,i,n,e[a+2],23,-995338651),n=m(n,s,r,i,e[a+0],6,-198630844),i=m(i,n,s,r,e[a+7],10,1126891415),r=m(r,i,n,s,e[a+14],15,-1416354905),s=m(s,r,i,n,e[a+5],21,-57434055),n=m(n,s,r,i,e[a+12],6,1700485571),i=m(i,n,s,r,e[a+3],10,-1894986606),r=m(r,i,n,s,e[a+10],15,-1051523),s=m(s,r,i,n,e[a+1],21,-2054922799),n=m(n,s,r,i,e[a+8],6,1873313359),i=m(i,n,s,r,e[a+15],10,-30611744),r=m(r,i,n,s,e[a+6],15,-1560198380),s=m(s,r,i,n,e[a+13],21,1309151649),n=m(n,s,r,i,e[a+4],6,-145523070),i=m(i,n,s,r,e[a+11],10,-1120210379),r=m(r,i,n,s,e[a+2],15,718787259),s=m(s,r,i,n,e[a+9],21,-343485551),n=l(n,o),s=l(s,c),r=l(r,u),i=l(i,d)}return Array(n,s,r,i)}(function(e){for(var t=new Array,n=(1<<r)-1,s=0;s<e.length*r;s+=r)t[s>>5]|=(e.charCodeAt(s/r)&n)<<s%32;return t}(e=s),e.length*r))}function h(e){for(var t=document.cookie,n=e+"=",s=t.length,r=0;r<s;){var i=r+n.length;if(t.substring(r,i)==n){var a=t.indexOf(";",i);return-1==a&&(a=s),unescape(t.substring(i,a))}if(0==(r=t.indexOf(" ",r)+1))break}return-1}function p(e){if(!e)return e;for(var t=1,n=arguments.length;t<n;t++){var s=arguments[t];if(s)for(var r in s)void 0===e[r]&&(e[r]=s[r])}return e}var n,e,s,r,i,a,m,o,l=navigator.userAgent,g=document.referrer,w=(r=e||window.location.search,i=s||window.location.hash,a=function(e,t){var r={};return e?(e.replace(t,function(e,t,n,s){r[t]=s}),r):null},{search:a(r,new RegExp("([^?=&]+)(=([^&]*))?","g"))||{},hash:a(i,new RegExp("([^#=&]+)(=([^&]*))?","g"))||{}}).search,v=w.spss?w.spss:l.match(/newsapp/gi)?"native":document.referrer.match(/163.com/gi)?"163":"other";function c(){if(!m){if(-1==h("_ntes_nuid"))m=n;else{m=h("_ntes_nuid");try{window.localStorage.setItem("ntesSpsuid",m)}catch(e){console.log(e.message,e.name,e.stack)}}var e="";try{e=localStorage.getItem("ntesSpsuid")}catch(e){console.log(e.message,e.name,e.stack)}if(!(m=m||e)){m=t();try{window.localStorage.setItem("ntesSpsuid",m)}catch(e){console.log(e.message,e.name,e.stack)}}}return m}function u(){if(!o){o=parseInt(w.spsw)||0;var e=!1;w.spssid==m&&(e=!0),e||(o+=1)}return o}function d(e){var t,n="";l.match(/micromessenger/gi)?n=w.from?"wx:"+w.from.split("#")[0]:"wx":l.match(/weibo/gi)?n="wb":l.match(/yixin/gi)?n="yx":l.match(/qq/gi)?n="qq":l.match(/newsapp/gi)?n="newsapp":g.match(/weibo\.com/)?n="wb":(g.match(/qq\.com/)||g.match(/qzone\.com/))&&(n="qq");var s,r,i,a,o,c,u=h("_antanalysis_s_id");if(-1==u){var d=(new Date).getTime();s="_antanalysis_s_id",r=d,document.cookie=s+"="+r+"; expires=-1; path=/; domain="+document.domain,u=d}t={sdk_ver:"1.22",session_id:u,ct:n,source:v,uuid:m,channel:w.spsc?w.spsc:"",val_act:"",val_url:window.location.href,uid:(i="P_INFO",a="P_OINFO",o=h(i),c=h(a),-1==o?-1==c?"":c:o).split("|")[0],uname:"",val_ref:w.referrerURL,sc:screen.width+"*"+screen.height,info:{spstitle:w.title,spssid:w.spssid?w.spssid:"",spsw:parseInt(w.spsw)?parseInt(w.spsw):0}},e&&e.info&&(e.info=p(t.info,e.info));var f=p(e,t);return f.callback&&delete f.callback,window.params=f}return w.title=document.title,w.currentURL=document.location.href,w.referrerURL=document.referrer,window.addEventListener("message",function(e){e.origin.match("c.m.163.com")&&(n=e.data.ntesSpsuid)},!1),document.addEventListener("DOMContentLoaded",function(e){var t;(t=document.createElement("iframe")).setAttribute("src","https://c.m.163.com/nc/qa/uid.html"),t.setAttribute("width",0),t.setAttribute("height",0),t.setAttribute("tabindex",-1),t.setAttribute("style","display:none;"),t.setAttribute("class","ntesanalysis-sync-iframe"),document.body.insertBefore(t,document.body.children[0])}),m=c(),o=u(),{sendData:function(e){if(!/baiduspider/gi.test(navigator.userAgent)){var t=e.callback;!function(e){e.tm=(new Date).getTime();var t=encodeURIComponent(JSON.stringify(e)),n="http:";"https:"==window.location.protocol&&(n="https:");var s=n+"//h5.analytics.126.net/news/c?"+t,r="ntes_ant_"+(new Date).getTime();(window[r]=new Image).src=s}(d(e)),e&&t&&t()}},getShareLink:function(e){e&&(e=function(e){var t,n="",s=["spssid","spsw","spss","spsc"];for(t=0;t<s.length;t++)-1==e.indexOf(s[t])&&w[s[t]]&&(n+=s[t]+"="+w[s[t]]),t!=s.length-1&&n&&(n+="&");return n&&(-1!=e.indexOf("?")?e+="&"+n:e+="?"+n),-1==e.indexOf("http")&&(e="http://"+e),e}(e));var t="",n=e||window.location.href,s=new URL(n);if(s.search){var r=s.search;(t=r.match(/spssid=\w+/g)?r.replace(/spssid=\w+/g,"spssid="+m):r+"&spssid="+m).match(/spsw=\d+/g)?t=t.replace(/spsw=\d+/g,"spsw="+o):t+="&spsw=1",t.match(/spss=\w+/g)||(t=t+"&spss="+v),t=s.origin+s.pathname+t+s.hash}else t=s.origin+s.pathname+"?spssid="+m+"&spsw=1&spss="+v+s.hash;return t},info:{uid:c(),spsuid:c(),spsw:u()}}});